fragment item on Item {
  id
  name
  sizeLocalization {
    name
    countries {
      code
    }
  }
}

fragment bundle on Bundle {
  type
  priceType
  minPrice {
    formattedValue
  }
  maxPrice {
    formattedValue
  }
  sections {
    id
    quantity
    items {
      id
      name
      uri
      media {
        altText
        source {
          url
        }
      }
      price {
        formattedValue
        value
        currency {
          code
        }
      }
      items {
        ...item
        stock {
          available
        }
      }
      ...sizeGuide
    }
  }
}

fragment variantSwatch on DisplayItem {
  swatch: attributes(keys: ["variant_swatch"]) {
    __typename
    ... on DynamicAttribute {
      elements {
        __typename
        key
        ... on AttributeStringElement {
          value
        }
      }
    }
  }
}

fragment sizeGuide on DisplayItem {
  sizeGuide: attributes(keys: ["pd_size_guide"]) {
    __typename
    ... on DynamicAttribute {
      elements {
        __typename
        key
        ... on AttributeStringElement {
          value
        }
      }
    }
  }
}

fragment listProduct on DisplayItem {
  id
  uri
  name
  media {
    altText
    source(sizeName: "1350x0") {
      url
    }
  }
  productVariant {
    name
  }
  ...variantSwatch
  relatedDisplayItems(relationType: "variant") {
    relation
    displayItems {
      uri
      productVariant {
        name
      }
      ...variantSwatch
    }
  }
  price {
    formattedValue
  }
  bundle {
    type
    priceType
    minPrice {
      formattedValue
    }
  }
}

fragment subscriptionPlan on SubscriptionPlan {
  id
  discount
  interval {
    value
    type
  }
}

fragment productDetails on DisplayItem {
  id
  available
  uri
  name
  metaTitle
  metaDescription
  subscriptionPlans {
    ...subscriptionPlan
  }
  shortDescription {
    formatted
  }
  description {
    formatted
  }
  collection {
    name
  }
  productVariant {
    name
  }
  brand {
    name
  }
  media {
    id
    altText
    source(sizeName: "1350x0") {
      url
    }
  }
  price {
    formattedValue
    value
    currency {
      code
    }
  }
  category {
    uri
    name
  }
  items {
    ...item
    stock {
      available
      quantity
    }
  }
  relatedDisplayItems(relationType: "variant") {
    relation
    displayItems {
      uri
      productVariant {
        name
      }
      ...variantSwatch
    }
  }
  productVariant {
    name
  }
  ...variantSwatch
  ...sizeGuide
  translations {
    language {
      code
    }
    uri
  }
  bundle {
    ...bundle
  }
}
