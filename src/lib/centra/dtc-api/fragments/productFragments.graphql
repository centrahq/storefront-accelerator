fragment item on Item {
  id
  name
  sizeLocalization {
    name
    countries {
      code
    }
  }
}

fragment bundle on Bundle {
  type
  priceType
  minPrice {
    formattedValue
  }
  maxPrice {
    formattedValue
  }
  sections {
    id
    quantity
    items {
      id
      name
      uri
      media {
        altText
        source {
          url
        }
      }
      price {
        formattedValue
        value
        currency {
          code
        }
      }
      items {
        ...item
        stock {
          available
        }
      }
    }
  }
}

fragment variantSwatch on DisplayItem {
  swatch: attributes(keys: ["variant_swatch"]) {
    __typename
    ... on DynamicAttribute {
      elements {
        __typename
        key
        ... on AttributeStringElement {
          value
        }
      }
    }
  }
}

fragment listProduct on DisplayItem {
  id
  uri
  name
  media {
    altText
    source(sizeName: "1350x0") {
      url
    }
  }
  productVariant {
    name
  }
  ...variantSwatch
  relatedDisplayItems(relationType: "variant") {
    relation
    displayItems {
      uri
      productVariant {
        name
      }
      ...variantSwatch
    }
  }
  price {
    formattedValue
  }
  bundle {
    type
    priceType
    minPrice {
      formattedValue
    }
  }
}
